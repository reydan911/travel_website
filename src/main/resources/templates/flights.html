<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Flights â€“ Smart Travel Planner</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" th:href="@{/}">Smart Travel Planner</a>
        <div>
            <a class="nav-link d-inline text-white" th:href="@{/flights}">Flights</a>
            <a class="nav-link d-inline text-white" th:href="@{/hotels}">Hotels</a>
            <a class="nav-link d-inline text-white" th:href="@{/recommendations}">AI Suggestions</a>
        </div>
    </div>
</nav>

<div class="container py-5">
    <h1 class="mb-4">Available Flights</h1>

    <!-- Search form -->
    <form class="row g-3 mb-4" th:action="@{/search-flights}" method="get">
        <div class="col-md-4">
            <label class="form-label">Origin</label>
            <input type="text" class="form-control" name="origin" placeholder="e.g. KUL">
        </div>
        <div class="col-md-4">
            <label class="form-label">Destination</label>
            <input type="text" class="form-control" name="destination" placeholder="e.g. TYO">
        </div>
        <div class="col-md-4 d-flex align-items-end">
            <button type="submit" class="btn btn-primary w-100">Search Flights</button>
        </div>
    </form>

    <table class="table table-striped table-hover" th:if="${flights != null}">
        <thead>
        <tr>
            <th>Airline</th>
            <th>Flight #</th>
            <th>Origin</th>
            <th>Destination</th>
            <th>Departure</th>
            <th>Arrival</th>
            <th>Price (RM)</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="f : ${flights}">
            <td th:text="${f.airline}">Airline</td>
            <td th:text="${f.flightNumber}">FN123</td>
            <td th:text="${f.origin}">KUL</td>
            <td th:text="${f.destination}">TYO</td>
            <td th:text="${#temporals.format(f.departureTime, 'dd/MM/yyyy HH:mm')}">Dep</td>
            <td th:text="${#temporals.format(f.arrivalTime, 'dd/MM/yyyy HH:mm')}">Arr</td>
            <td th:text="${f.price}">999.00</td>
        </tr>
        </tbody>
    </table>

    <p th:if="${flights == null or #lists.isEmpty(flights)}">
        No flights found.
    </p>

    <a class="btn btn-outline-secondary mt-3" th:href="@{/}">Back to Home</a>
</div>
</body>
</html>
